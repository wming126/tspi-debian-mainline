# RK3566 TaiShan Pi (æ³°å±±æ´¾) Debian Mainline OS

[![Kernel](https://img.shields.io/badge/Kernel-Mainline-blue.svg)](https://kernel.org)
[![OS](https://img.shields.io/badge/OS-Debian%2012%20Bookworm-orange.svg)](https://www.debian.org)
[![Hardware](https://img.shields.io/badge/Hardware-RK3566-red.svg)](https://www.rock-chips.com/)

è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º **RK3566 æ³°å±±æ´¾ (TaiShan Pi)** æ‰“é€ çš„è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿã€‚å®ƒèƒ½å¤Ÿç”Ÿæˆä¸€ä¸ªçº¯å‡€ã€é«˜æ€§èƒ½ã€ä¸”å®Œç¾é€‚é…ç¡¬ä»¶çš„ **Debian 12 (Bookworm)** æ“ä½œç³»ç»Ÿï¼Œé‡‡ç”¨æœ€æ–°çš„ **ä¸»çº¿ Linux å†…æ ¸ (Mainline Kernel)**ã€‚

---

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

*   **çº¯å‡€ä¸»çº¿å†…æ ¸**ï¼šå‘Šåˆ«åŸå‚è€æ—§å†…æ ¸ï¼Œæ‹¥æŠ±æœ€æ–°çš„ Linux ç¤¾åŒºç‰¹æ€§ã€‚
*   **å…¨ç¡¬ä»¶åŠ é€Ÿ**ï¼š
    *   **GPU (Mali-G52)**ï¼šé€šè¿‡ Panfrost å¼€æºé©±åŠ¨å®ç° OpenGL ç¡¬ä»¶åŠ é€Ÿã€‚
    *   **HDMI æ˜¾ç¤º**ï¼šå®Œç¾æ”¯æŒ 1080P/4K è¾“å‡ºã€‚
*   **æ— çº¿åŠŸèƒ½å®Œå¤‡**ï¼š
    *   **WiFi (AP6212)**ï¼šè§£å†³ `clm_blob` ç¼ºå¤±å¯¼è‡´çš„æ‰«æé—®é¢˜ã€‚
    *   **Bluetooth**ï¼šä¿®å¤äº† 3Mbps ä¸‹çš„å¤ä½è¶…æ—¶é—®é¢˜ï¼Œç¨³å®šå·¥ä½œåœ¨ 1.5Mbpsï¼ˆ**ç›¸å…³è¡¥ä¸å·²å°è¯•æäº¤ä¸Šæ¸¸**ï¼‰ã€‚
*   **è½»é‡çº§æ¡Œé¢**ï¼šé¢„è£… **XFCE4** æ¡Œé¢ç¯å¢ƒï¼Œå¯åŠ¨å³ç”¨ã€‚
*   **è‡ªåŠ¨åŒ–åŠ å›º**ï¼š
    *   **æ™ºèƒ½è·¯ç”±**ï¼šWiFi ä¼˜å…ˆçº§é«˜äº USB è™šæ‹Ÿç½‘å¡ï¼Œé¿å…æ–­ç½‘ã€‚
    *   **æ—¶é—´åŒæ­¥**ï¼šé¢„è®¾é˜¿é‡Œäº‘/è…¾è®¯äº‘ NTP æœåŠ¡å™¨ï¼Œè§£å†³åµŒå…¥å¼æ— ç”µæ± æ—¶é—´é‡ç½®é—®é¢˜ã€‚
    *   **è‡ªåŠ¨æ‰©å®¹**ï¼šé¦–æ¬¡å¼€æœºè‡ªåŠ¨æ‰©å±• Root åˆ†åŒºè‡³ eMMC å…¨å®¹é‡ã€‚

---

## ğŸ› ï¸ æ„å»ºæŒ‡å—

é¡¹ç›®æä¾›äº†å…¨è‡ªåŠ¨åŒ–çš„æ„å»ºè„šæœ¬ï¼Œå»ºè®®åœ¨ Ubuntu 22.04+ ç¯å¢ƒä¸‹æ“ä½œã€‚

### 1. å‡†å¤‡ç¯å¢ƒ
```bash
sudo apt update
sudo apt install debootstrap qemu-user-static git-email parted
```

### 2. æ„å»º RootFS
ä»é›¶ä¸‹è½½ Debian åŸºç¡€åŒ…å¹¶é…ç½®ç¯å¢ƒï¼š
```bash
sudo ./build_rootfs_from_scratch.sh
```

### 3. ç”Ÿæˆå®Œæ•´é•œåƒ
ç¼–è¯‘ U-Bootã€å†…æ ¸å¹¶ç»„è£…æˆä¸€ä¸ª `.img` æ–‡ä»¶ï¼š
```bash
sudo ./build_complete_image_v4.sh
```

ç”Ÿæˆçš„é•œåƒä½äºï¼š`output/tspi_unified_image_v4.img`

---

## ğŸš€ çƒ§å½•ä¸ä½¿ç”¨

### çƒ§å½•æ–¹æ³• (Maskrom æ¨¡å¼)
ä½¿ç”¨ `rkdeveloptool` æˆ– `upgrade_tool` è¿›è¡Œçƒ§å½•ï¼š
```bash
sudo ./rkdeveloptool/rkdeveloptool wl 0 output/tspi_unified_image_v4.img
```

### é»˜è®¤è´¦æˆ·
*   **ç”¨æˆ·å**: `root`
*   **å¯†ç **: `root`

---

## ğŸ“ˆ ä¸Šæ¸¸è´¡çŒ® (Upstreaming)

æœ¬é¡¹ç›®è‡´åŠ›äºå°†ä¿®å¤åé¦ˆç»™ä¸»çº¿å†…æ ¸ç¤¾åŒºã€‚
*   **è“ç‰™ç¨³å®šæ€§è¡¥ä¸**ï¼šæ›´æ–°äº† `compatible` å­—ç¬¦å¹¶ä¼˜åŒ–äº† UART æ³¢ç‰¹ç‡ï¼Œè§£å†³äº† `Reset failed (-110)` é”™è¯¯ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„

*   `src/`ï¼šå­˜æ”¾å†…æ ¸ã€U-Boot å’Œ rkbin æºç ã€‚
*   `firmware/`ï¼šå¿…è¦çš„æ— çº¿ç½‘å¡å›ºä»¶è¡¥ä¸ã€‚
*   `tools/`ï¼šè°ƒè¯•ä¸è¾…åŠ©å·¥å…·ã€‚
*   `doc/`ï¼šè¯¦ç»†çš„å¼€å‘ä¸è°ƒè¯•æ—¥å¿—ã€‚

---

## ğŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT License**ã€‚å†…æ ¸ä¸ U-Boot éµå¾ªå…¶å„è‡ªçš„ GPL åè®®ã€‚

---

**ç”± Ming Wang (wangming5719@gmail.com) ç»´æŠ¤ã€‚**
å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹ä¸€ä¸ª **Star**! â­
